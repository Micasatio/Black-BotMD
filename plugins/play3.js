let fs = require('fs')
let fetch = require('node-fetch')
let { youtubeSearch } = require('@bochilteam/scraper')
let handler = async (m, { conn, command, text, usedPrefix }) => {
if (!text) throw `*[â—ğˆğğ…ğâ—] y que mierda querÃ©s que busque pon el nombre de la canciÃ³n por ejemplo ${usedPrefix + command} wenamechiinsama*`
try {
let vid = (await youtubeSearch(text)).video[0]
let { title, description, thumbnail, videoId, durationH, viewH, publishedTime } = vid
const url = 'https://www.youtube.com/watch?v=' + videoId
let caption = `ğŸ“Œ *ğšƒğ™¸ğšƒğš„ğ™»ğ™¾:* ${title}
ğŸ“‡ *ğ™³ğ™´ğš‚ğ™²ğšğ™¸ğ™¿ğ™²ğ™¸ğ™¾ğ™½:* ${description}
ğŸ“† *ğ™¿ğš„ğ™±ğ™»ğ™¸ğ™²ğ™°ğ™³ğ™¾:* ${publishedTime}
âŒš *ğ™³ğš„ğšğ™°ğ™²ğ™¸ğ™¾ğ™½:* ${durationH}
ğŸ‘€ *ğš…ğ™¸ğš‚ğšƒğ™°ğš‚:* ${viewH}
ğŸ”— *ğš„ğšğ™»:* ${url}`.trim()
let buttons = [
{ buttonId: `${usedPrefix}getaud ${url}`, buttonText: { displayText: 'ğ€ğ”ğƒğˆğ' }, type: 1 },
{ buttonId: `${usedPrefix}getvid ${url}`, buttonText: { displayText: 'ğ•ğˆğƒğ„ğ' }, type: 1 }]
let buttonMessage = {
image: await fetch(thumbnail),
caption: caption,
mentions: [m.sender],
footer: `*${wm}*`,
buttons: buttons,
headerType: 4,
contextInfo: {
mentionedJid: [m.sender],
externalAdReply: {
showAdAttribution: true,
mediaType: 'VIDEO',
mediaUrl: null,
title: 'ğŸ‘‘ ğ€ğœğ¢ğğ¢ğœğğ¨ğğğ¬ ğ‡ğ¨ğ¬ğ­ ğŸ‘‘',
body: null,
thumbnail: fs.readFileSync('./src/logo.png'),
sourceUrl: `https://chat.whatsapp.com/F0fU7LSlBBcBm6ny5fVSuT`
}}}
conn.sendMessage(m.chat, buttonMessage, { quoted: m }) 
} catch {
m.reply('*[â—ğˆğğ…ğâ—] ğ™´ğšğšğ™¾ğš, ğ™¿ğ™¾ğš ğ™µğ™°ğš…ğ™¾ğš ğš…ğš„ğ™´ğ™»ğš…ğ™° ğ™° ğ™¸ğ™½ğšƒğ™´ğ™½ğšƒğ™°ğšğ™»ğ™¾*')
}}
handler.command = /^(play3)$/i
module.exports = handler
